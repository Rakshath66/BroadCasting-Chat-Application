<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        .main{
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        h1 {
            /* font-size: 10vw; make our h1 tag larger */
            font-family: sans-serif; /* choosing our font */
            background: linear-gradient(to right, rgb(255, 255, 255) 0%, rgb(249, 246, 238) 20%, rgb(185, 199, 198) 61%), linear-gradient(rgb(249, 246, 238) 52%, rgb(224, 246, 255) 60%, rgb(249, 246, 238) 61%); /* you can change the colors based on your preference */
            background-clip: text; /*it defines how far the background should extend within an element, here we set it to text */
            -webkit-background-clip: text; /*for browsers compatibility */
            -webkit-text-fill-color: transparent; /* specifies the fill color of text characters. We use transparent to use the background as our text fill  */
            animation: wave 2000ms ease alternate infinite;
            transition: all 0.4s ease;
      }
      @keyframes wave {
        0% {
          background-position: 0 0;
        }
        100% {
          background-position: 50vw 10px;
        }
      }
    </style>
</head>

<body class="p-3 mb-2 bg-black text-white">
    <div class="main">
        <h1>BroadCasting</h1>
    <!-- <button onclick="createConnection()">Create WS Connection</button> -->

    <div class="hi">
        <input type="text" id="message" placeholder="Enter Message" />
        <button id="sendBtn">Send</button>\
        <div id="messages"></div>
    </div>

    

    <script src="/socket.io/socket.io.js"></script>
    <script>
        // function createConnection(){
            // const socket = io();
        // }
        const socket = io();//connection form
        const sendBtn=document.getElementById("sendBtn");
        const messageInput=document.getElementById("message");
        const allMessages=document.getElementById("messages");

        let flag=0;
        socket.on("message", (message) => {
            const div=document.createElement('div');
            const p=document.createElement('p');

            if(flag==1){div.style.backgroundColor="#E2DFD2"; div.style.color="black"; div.style.textAlign="center"}
            else{div.style.textAlign="center"}
            flag=!flag;

            p.innerText=message;
            div.appendChild(p);
            allMessages.appendChild(div);//show mess in div

            //   Assigning 5 different colors 
            // const div=document.createElement('div');
            // const p=document.createElement('p');
            // if(flag%5==0){div.style.backgroundColor="blue";}
            // else if(flag%5==1){div.style.backgroundColor="white";}
            // else if(flag%5==2){div.style.backgroundColor="green";}
            // else if(flag%5==3){div.style.backgroundColor="red";}
            // else{}
            // flag++;
            // p.innerText=message;
            // div.appendChild(p);
            // div.style.flex="center";
            // allMessages.appendChild(div);//show mess in div
        });//if backend sends any message named mess, do this

        sendBtn.addEventListener("click", (e) => {
            const message=messageInput.value;
            console.log(message);
            socket.emit("user-message", message);//frontend to server
        })
        
    </script>
    </div>
</body>
</html>